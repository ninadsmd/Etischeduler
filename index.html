<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Resident Shift Scheduler</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Inter', sans-serif;
      background: #f4f6f8;
      color: #333;
    }
    header {
      background: #0d47a1;
      color: white;
      padding: 1rem;
      text-align: center;
    }
    .container {
      padding: 1rem;
      max-width: 1000px;
      margin: auto;
    }
    .instructions {
      background: #ffffff;
      border-left: 4px solid #0d47a1;
      padding: 1rem;
      margin-bottom: 1rem;
      font-size: 0.95rem;
      line-height: 1.5;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    }
    .btn-group { text-align: center; margin-bottom: 1rem; }
    button {
      background: #1976d2;
      color: white;
      padding: 0.5rem 1rem;
      margin: 0.2rem;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    button:hover { background: #1565c0; }
    .tab { display: none; }
    .tab.active { display: block; }
    .calendar {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
      gap: 0.75rem;
    }
    .calendar-day {
      background: white;
      border-radius: 8px;
      padding: 0.5rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      cursor: pointer;
    }
    .calendar-day strong {
      display: block;
      margin-bottom: 0.5rem;
      color: #0d47a1;
    }
    .calendar-day div {
      font-size: 0.85rem;
    }
    .modal, .admin-login, .edit-modal {
      position: fixed;
      top: 50%; left: 50%;
      transform: translate(-50%, -50%);
      background: white;
      border-radius: 8px;
      padding: 1rem;
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
      z-index: 1000;
      width: 90%;
      max-width: 400px;
    }
    .modal input, .modal select,
    .admin-login input,
    .edit-modal input, .edit-modal select {
      width: 100%;
      margin-bottom: 1rem;
      padding: 0.5rem;
      border: 1px solid #ccc;
      border-radius: 4px;
    }
    .overlay {
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: rgba(0, 0, 0, 0.5);
      z-index: 999;
    }
    .filter-group {
      margin: 1rem 0;
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      justify-content: center;
    }
    .filter-group select {
      padding: 0.4rem;
      border-radius: 4px;
      border: 1px solid #ccc;
    }
    .badge {
      display: inline-block;
      padding: 0.25rem 0.5rem;
      border-radius: 12px;
      font-size: 0.75rem;
      font-weight: 600;
      color: white;
    }
    .badge.senior { background: #0d47a1; }
    .badge.fellow { background: #388e3c; }
    @media (max-width: 600px) {
      .calendar-day { font-size: 0.8rem; }
      button { font-size: 0.85rem; padding: 0.4rem 0.6rem; }
      .filter-group { flex-direction: column; align-items: center; }
    }
  </style>
</head>
<body>
  <header>
    <h1>Resident Shift Scheduler</h1>
  </header>
  <div class="container">
    <div class="btn-group">
      <button onclick="switchTab('request')">Request Shift</button>
      <button onclick="switchTab('pending')">Pending</button>
      <button onclick="switchTab('approved')">Approved</button>
      <button onclick="exportCSV()">CSV</button>
      <button onclick="exportPDF()">PDF</button>
    </div>

    <div class="filter-group">
      <select id="filterResident" onchange="applyFilters()">
        <option value="">Filter by Resident</option>
      </select>
      <select id="filterShiftType" onchange="applyFilters()">
        <option value="">Filter by Shift Type</option>
        <option value="5:00 PM to 11:59 PM EUHM">5:00 PM to 11:59 PM EUHM</option>
        <option value="5:00 PM to 11:59 PM Grady">5:00 PM to 11:59 PM Grady</option>
        <option value="12:00 PM to 8:00 PM Grady">12:00 PM to 8:00 PM Grady</option>
      </select>
    </div>

    <div id="request" class="tab active">
      <h2>Request Shift</h2>
      <div class="instructions">
        <strong>Instructions for Scheduling</strong><br><br>
        In a proposed 14-day block, the resident would work 7 shifts.<br>
        ‚Ä¢ In a 4-week block, the resident would work 14 shifts.<br>
        ‚Ä¢ One exception would be if the resident selects 5 PM ‚Äì 12 AM shifts, which are weighted more heavily, as follows:<br>
        ‚ó¶ In a two-week block, if the resident works two 5 PM ‚Äì 12 AM shifts it counts as 3 shifts, four (max) 5 PM ‚Äì 12 AM shifts count as a total of 6, and the remainder of the shifts are other time slots to total 7 shifts.<br>
        ‚ó¶ In a four-week block, if the resident works two 5 PM ‚Äì 12 AM shifts it counts as 3 shifts, four 5 PM ‚Äì 12 AM shifts count as a total of 6, and six (max) 5 PM ‚Äì 12 AM shifts count as a total of 9, and the remainder of the shifts are other time slots to total 14 shifts.<br>
        ‚Ä¢ Weekends are not required, but could be incorporated at the discretion of the resident (say if they wanted to block shifts in a row for a longer period of time off).<br>
        ‚Ä¢ All schedules will comply with ACGME guidelines.
      </div>
      <div class="calendar" id="request-calendar"></div>
    </div>

    <div id="pending" class="tab">
      <h2>Pending Approval <button onclick="openAdminLogin()">üîê</button></h2>
      <div class="calendar" id="pending-calendar"></div>
    </div>
    <div id="approved" class="tab">
      <h2>Approved Shifts</h2>
      <div class="calendar" id="approved-calendar"></div>
    </div>
  </div>

  <template id="shift-options">
    <select id="residentType">
      <option value="ETI Senior">ETI Senior</option>
      <option value="ETI mini fellow">ETI mini fellow</option>
    </select>
    <select id="shiftType">
      <option value="5:00 PM to 11:59 PM EUHM">5:00 PM to 11:59 PM EUHM - Evening shift at EUHM</option>
      <option value="5:00 PM to 11:59 PM Grady">5:00 PM to 11:59 PM Grady - Evening shift at Grady</option>
      <option value="12:00 PM to 8:00 PM Grady">12:00 PM to 8:00 PM Grady - Day shift at Grady</option>
    </select>
  </template>
</body>
</html>
